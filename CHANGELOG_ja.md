# 変更履歴

このプロジェクトの全ての注目すべき変更はこのファイルに記録されます。

フォーマットは [Keep a Changelog](https://keepachangelog.com/ja/1.1.0/) に基づいています。

## [1.0.11] - 2026-02-15

### 修正
- UpdateModalでReactフックの順序違反により「Rendered more hooks than during the previous render」エラーが発生する問題を修正

## [1.0.10] - 2026-02-15

### 変更
- プレイヤー起動時の動画プローブ（`ffprobe`）を即時実行から再生エラー時のみのオンデマンド実行に変更し、メタデータ取得中のCPU/ディスク競合を軽減
- プレイヤーのインラインエラー表示を専用のエラーモーダルダイアログに変更（「フォルダを開く」アクション付き）
- 「外部プレイヤーで開く」ボタンを削除
- メタデータダウンロードのタイムアウトを延長（info.json: 15秒→30秒、コメント: 60秒→120秒）し、負荷時のエラーを削減

## [1.0.9] - 2026-02-15

### 追加
- アップデートモーダルに多言語対応の更新履歴を表示（折りたたみ式、MarkdownからHTML変換）
- 変更履歴ファイルのバイリンガル化: `CHANGELOG.md`（英語）/ `CHANGELOG_ja.md`（日本語）
- リリースワークフローで `latest.json` に多言語更新履歴を埋め込み

### 修正
- リリース版でライブチャットのアバター画像・絵文字が表示されない問題を修正（CSPに `*.ggpht.com` と `www.youtube.com` を許可）
- CSPの `media-src` ディレクティブが結合されていたタイプミスを修正

### 変更
- リリースワークフローのリリースノートを日英バイリンガル化

## [1.0.8] - 2026-02-15

### 修正
- リリースビルドでローカルファイル（画像・動画）が読み込めない問題を修正（CSPに `http://asset.localhost` を追加）
- Unicode文字（日本語・特殊記号等）を含むファイルパスが正しくURLエンコードされない問題を修正
- リリースビルド時の未使用変数warningを修正

### 変更
- `toAssetUrl` ユーティリティを新規追加し、`convertFileSrc` の直接使用を置き換え
- サムネイル検索ロジックを新形式（`{id}.{ext}`）と旧形式（`{title} [{id}].{ext}`）の両方に対応

## [1.0.7] - 2026-02-15

### 修正
- ライブ配信動画のサムネイル保存時にタイトルからタイムスタンプを除去するよう修正
- `uploader_id` が空の場合にサムネイル保存をスキップし、メタデータ取得後に保存するよう修正
- サムネイル更新時に既存のメタデータpatchを上書きしない問題を修正

### 変更
- `thumbnails` ディレクトリをライブラリの子ディレクトリとして認識するよう追加
- サムネイル検索時にルートの `thumbnails` ディレクトリもフォールバック検索するよう改善

## [1.0.6] - 2026-02-14

### 修正
- ライブ配信中の動画を追加した際にメタデータ取得が無限ループに入る問題を修正
- 起動時以外では既に取得済みのライブ配信動画のメタデータを再取得しないように変更
- ライブ配信検出時のフローティング通知が重複して表示される問題を修正

## [1.0.5] - 2026-02-14

### 追加
- アップデートモーダルに「手動でインストール」ボタンを追加（NSISインストーラーをブラウザで直接ダウンロード可能に）
- Windowsスマートアプリコントロールにより自動更新が失敗する場合の警告メッセージを追加

## [1.0.4] - 2026-02-14

### 修正
- `useAppUpdater` のTypeScriptコンパイルエラーを修正

## [1.0.3] - 2026-02-14

### 修正
- ZIP圧縮方式を `NoCompression`（Stored）に変更し、Tauri updaterとの互換性をさらに改善
- `latest.json` のダウンロードURLファイル名のスペース処理を修正

## [1.0.2] - 2026-02-14

### 修正
- リリースワークフローのZIP圧縮方式をTauri updaterとの互換性に対応
- アップデートモーダルのUIをプロジェクトのCSSクラス体系に統一

### 変更
- アップデートモーダルからインラインスタイルを削除し、`App.css` に移行

## [1.0.1] - 2026-02-14

### 追加
- 設定モーダルにアプリケーションバージョン情報を表示

### 変更
- Cookie取得元の設定を「基本」タブから「ツール」タブに移動し、関連設定をグループ化

## [1.0.0] - 2026-02-14

正式リリース。プロダクション対応完了。

### 変更
- v0.1.0からの安定性向上と最終調整
- プロダクション環境での利用に対応

## [0.1.0] - 2026-02-12

初回ベータリリース。

### 追加

#### 動画ダウンロード
- YouTube動画のローカルダウンロード機能
- ダウンロード品質の選択機能
- 一括ダウンロードキュー・進捗パネル
- ブラウザCookie連携によるダウンロード対応
- yt-dlpエラー時のリトライ処理（タイトル警告、デコードエラー対応）
- ダウンロードエラーログの自動保存

#### 再生
- 別ウィンドウでの動画プレーヤー
- ライブチャット同期再生（絵文字・アバター表示対応）
- 自動再生
- プレーヤーウィンドウのサイズ・位置の保存

#### チャンネル・動画管理
- チャンネル一括登録・メタデータ取得
- 動画の検索機能
- ダウンロード状態・種類によるフィルタリング
- 公開日ソート・表示
- YouTube URLバリデーション

#### UI/UX
- ダークモード対応
- サムネイルのローカルキャッシュ・クリック再生
- スケルトンカード（動画追加時のローディング表示）
- フローティングステータスパネル
- 動画グリッドのカラム幅調整
- 初回セットアップウィザード（オンボーディング）
- 起動時データチェックオーバーレイ
- ウィンドウサイズ・位置の永続化

#### データ管理
- バックアップ・リストア機能
- メタデータの整合性チェック・サムネイル処理の改善
- コメントDL完了時のメタデータ更新・保存先統一

#### 外部ツール
- yt-dlp / ffmpeg / ffprobe の初回起動時自動ダウンロード
- yt-dlpの更新フロー・通知
- ffmpeg/ffprobe のバンドル検出
- ツール存在チェック・動画追加のゲート処理

#### 開発基盤
- ユニットテスト・E2Eテスト環境の構築（Vitest + Playwright）
- NSISインストーラによるWindows配布（per-user）
- GitHub Actions CI/CDワークフロー
- Rustバックエンドのモジュール分割

### セキュリティ
- Content Security Policy（CSP）の設定
- Tauri権限の最小化
- 未使用プラグインの削除
